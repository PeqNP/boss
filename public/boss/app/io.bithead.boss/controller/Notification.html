<div class="ui-window ui-notification" style="width: 340px;">
  <script type="text/javascript">
    function $(this.id)(view) {
      let notification;

      let delegate = protocol(
        "NotificationDelegate", this, "delegate",
        ["didCloseNotification"]
      );

      function openDeepLink() {
        if (!isEmpty(notification.deepLink)) {
          os.openDeepLink(notification.deepLink);
        }
        close();
      }
      this.openDeepLink = openDeepLink;

      function close() {
        view.ui.close();
      }
      this.close = close;

      function configure(notif) {
        notification = notif;
      }
      this.configure = configure;

      function viewDidLoad() {
        if (isEmpty(notification)) {
          console.error("Notification must be configured");
          close();
          return;
        }

        view.ui.div("title > span").innerText = notification.title;
        view.ui.div("body").innerHTML = notification.body;
        if (isEmpty(notification.deepLink)) {
          view.ui.div("controls").style.display = 'none';
        }
        else {
        }
      }
      this.viewDidLoad = viewDidLoad;

      // NOTE: This gets called regardless of how the window was closed
      function viewWillUnload() {
        delegate?.didCloseNotification(notification);
      }
      this.viewWillUnload = viewWillUnload;
    }
  </script>
  <div class="top">
    <div class="close-button"></div>
    <div class="title"><span>Notification</span></div>
  </div>
  <div class="container vbox gap-10">
    <div class="body"></div>

    <div class="controls">
      <button class="default" onclick="$(this.controller).openDeepLink();">Open</button>
    </div>
  </div>
</div>

